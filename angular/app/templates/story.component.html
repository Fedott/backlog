<div class="backlog-story mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col">
    <div class="mdl-card__title mdl-card--expand backlog-story-title">
        <div *ngIf="showBasic" class="backlog-story-title-block">
            <h4  *ngIf="!isEditMode" [innerHTML]="story.text | nl2br"></h4>

            <div *ngIf="isEditMode">
                <textarea
                        [style.height]="getTextHeight()"
                        (keyup)="autoExpand($event.target)"
                        (focus)="autoExpand($event.target)"
                        [(ngModel)]="story.text"
                        id="text"
                        class="mdl-textfield__input"></textarea>
            </div>
        </div>
        <div *ngIf="showRequirements" class="backlog-story-title-block">
            <h5>Требования</h5>
            <ul class="mdl-list">
                <li *ngFor="#requirement of story.requirements" class="mdl-list__item">
                    <span class="mdl-list__item-primary-content">
                        <i class="material-icons">crop_original</i>
                        {{requirement}}
                    </span>
                    <a class="mdl-list__item-secondary-action"><i class="material-icons">star</i></a>
                </li>
            </ul>
        </div>
    </div>
    <div *ngIf="!isEditMode" class="mdl-card__actions mdl-card--border">
        <a (click)="toggleEditMode()" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
            Редактировать
        </a>
        <a (click)="toggleShowRequirements()" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
            Требования
        </a>
    </div>
    <div *ngIf="isEditMode" class="mdl-card__actions mdl-card--border">
        <a (click)="save()" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
            Сохранить
        </a>
        <a (click)="cancel()" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
            Отмена
        </a>
    </div>
    <div class="mdl-card__menu">
        <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect">
            <i class="material-icons">assignment_late</i>
        </button>
    </div>
</div>